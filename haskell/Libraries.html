<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<title>Libraries</title>
<!-- 2017-03-03 sex 16:51 -->
<meta  http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta  name="generator" content="Org-mode" />
<meta  name="author" content="Caio Rodrigues" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center; }
  .todo   { font-family: monospace; color: red; }
  .done   { color: green; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  pre.src-sh:before    { content: 'sh'; }
  pre.src-bash:before  { content: 'sh'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-R:before     { content: 'R'; }
  pre.src-perl:before  { content: 'Perl'; }
  pre.src-java:before  { content: 'Java'; }
  pre.src-sql:before   { content: 'SQL'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.right  { text-align: center;  }
  th.left   { text-align: center;   }
  th.center { text-align: center; }
  td.right  { text-align: right;  }
  td.left   { text-align: left;   }
  td.center { text-align: center; }
  dt { font-weight: bold; }
  .footpara:nth-child(2) { display: inline; }
  .footpara { display: block; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  /*]]>*/-->
</style>
<link href='/theme/style.css' rel='stylesheet'>
<link href="/Functional-Programming/theme/style.css" rel="stylesheet">

<script type="text/javascript" src="/theme/org-info.js">
/**
 *
 * @source: /theme/org-info.js
 *
 * @licstart  The following is the entire license notice for the
 *  JavaScript code in /theme/org-info.js.
 *
 * Copyright (C) 2012-2013 Free Software Foundation, Inc.
 *
 *
 * The JavaScript code in this tag is free software: you can
 * redistribute it and/or modify it under the terms of the GNU
 * General Public License (GNU GPL) as published by the Free Software
 * Foundation, either version 3 of the License, or (at your option)
 * any later version.  The code is distributed WITHOUT ANY WARRANTY;
 * without even the implied warranty of MERCHANTABILITY or FITNESS
 * FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.
 *
 * As additional permission under GNU GPL version 3 section 7, you
 * may distribute non-source (e.g., minimized or compacted) forms of
 * that code without the copy of the GNU GPL normally required by
 * section 4, provided you include this license notice and a URL
 * through which recipients can access the Corresponding Source.
 *
 * @licend  The above is the entire license notice
 * for the JavaScript code in /theme/org-info.js.
 *
 */
</script>

<script type="text/javascript">

/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2013 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/

<!--/*--><![CDATA[/*><!--*/
org_html_manager.set("TOC_DEPTH", "4");
org_html_manager.set("LINK_HOME", "");
org_html_manager.set("LINK_UP", "");
org_html_manager.set("LOCAL_TOC", "1");
org_html_manager.set("VIEW_BUTTONS", "0");
org_html_manager.set("MOUSE_HINT", "underline");
org_html_manager.set("FIXED_TOC", "0");
org_html_manager.set("TOC", "1");
org_html_manager.set("VIEW", "info");
org_html_manager.setup();  // activate after the parameters are set
/*]]>*///-->
</script>
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2013 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
</head>
<body>
<div id="content">
<h1 class="title">Libraries</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#sec-1">1. Libraries</a>
<ul>
<li><a href="#sec-1-1">1.1. System Programming in Haskell</a></li>
<li><a href="#sec-1-2">1.2. Data.Time</a>
<ul>
<li><a href="#sec-1-2-1">1.2.1. System</a></li>
<li><a href="#sec-1-2-2">1.2.2. Get current year / month / day in Haskell</a></li>
<li><a href="#sec-1-2-3">1.2.3. Get Current Time</a></li>
<li><a href="#sec-1-2-4">1.2.4. Documentation By Examples - GHCI shell</a>
<ul>
<li><a href="#sec-1-2-4-1">1.2.4.1. Date Time Manipulation</a></li>
<li><a href="#sec-1-2-4-2">1.2.4.2. Difference between two dates</a></li>
<li><a href="#sec-1-2-4-3">1.2.4.3. Day in a Week/Month/Year or Week Number</a></li>
<li><a href="#sec-1-2-4-4">1.2.4.4. Parsing Dates and Times from Strings</a></li>
<li><a href="#sec-1-2-4-5">1.2.4.5. Printing a Date</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#sec-1-3">1.3. Bytestring</a>
<ul>
<li><a href="#sec-1-3-1">1.3.1. Overview</a></li>
<li><a href="#sec-1-3-2">1.3.2. Example</a></li>
<li><a href="#sec-1-3-3">1.3.3. Documentation in Hackage</a></li>
</ul>
</li>
<li><a href="#sec-1-4">1.4. Parse Binary Files</a></li>
<li><a href="#sec-1-5">1.5. GnuPlot</a></li>
</ul>
</li>
</ul>
</div>
</div>
<lu> 
  <li><a href="/Functional-Programming/index.html">Index</a></li>
  <li><a href="https://github.com/caiorss/Functional-Programming">Repository</a></li>
</lu>

<div id="outline-container-sec-1" class="outline-2">
<h2 id="sec-1"><span class="section-number-2">1</span> Libraries</h2>
<div class="outline-text-2" id="text-1">
</div><div id="outline-container-sec-1-1" class="outline-3">
<h3 id="sec-1-1"><span class="section-number-3">1.1</span> System Programming in Haskell</h3>
<div class="outline-text-3" id="text-1-1">
<p>
<b>Directory</b>
</p>

<p>
Get current Directory
</p>
<pre class="example">
&gt; import System.Directory
&gt; 
&gt; getCurrentDirectory 
"/home/tux/PycharmProjects/Haskell"
&gt;
</pre>

<p>
Change Current Directory
</p>
<div class="org-src-container">

<pre class="src src-haskell"><span class="org-haskell-operator">&gt;</span> <span class="org-haskell-keyword">import</span> <span class="org-haskell-constructor">System.Directory</span>
<span class="org-haskell-operator">&gt;</span> 
<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">setCurrentDirectory</span> <span class="org-string">"/"</span>
<span class="org-haskell-operator">&gt;</span> 
<span class="org-haskell-operator">&gt;</span> getCurrentDirectory 
<span class="org-string">"/"</span>
<span class="org-haskell-operator">&gt;</span> 
<span class="org-haskell-definition">getCurrentDirectory</span> <span class="org-haskell-operator">::</span> <span class="org-haskell-type">IO</span> <span class="org-haskell-type">FilePath</span>
<span class="org-haskell-operator">&gt;</span> 
<span class="org-haskell-operator">&gt;</span> 
<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">fmap</span> (<span class="org-haskell-operator">==</span><span class="org-string">"/"</span>) getCurrentDirectory 
<span class="org-haskell-constructor">True</span>
<span class="org-haskell-operator">&gt;</span> 
<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">liftM</span> (<span class="org-haskell-operator">==</span><span class="org-string">"/"</span>) getCurrentDirectory 
<span class="org-haskell-constructor">True</span>
<span class="org-haskell-operator">&gt;</span>
</pre>
</div>

<p>
List Directory Contents
</p>
<div class="org-src-container">

<pre class="src src-haskell"><span class="org-haskell-operator">&gt;</span> <span class="org-haskell-keyword">import</span> <span class="org-haskell-constructor">System.Directory</span>
<span class="org-haskell-operator">&gt;</span>
<span class="org-haskell-operator">&gt;</span>  getDirectoryContents <span class="org-string">"/usr"</span>
[<span class="org-string">"."</span>,<span class="org-string">"include"</span>,<span class="org-string">"src"</span>,<span class="org-string">"local"</span>,<span class="org-string">"bin"</span>,<span class="org-string">"games"</span>,<span class="org-string">"share"</span>,<span class="org-string">"sbin"</span>,<span class="org-string">"lib"</span>,<span class="org-string">".."</span>]
<span class="org-haskell-operator">&gt;</span> 
<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-constructor">:</span>t getDirectoryContents 
<span class="org-haskell-definition">getDirectoryContents</span> <span class="org-haskell-operator">::</span> <span class="org-haskell-type">FilePath</span> <span class="org-haskell-operator">-&gt;</span> <span class="org-haskell-type">IO</span> [<span class="org-haskell-type">FilePath</span>]
<span class="org-haskell-operator">&gt;</span>
</pre>
</div>

<p>
Special Directories Location
</p>
<div class="org-src-container">

<pre class="src src-haskell"><span class="org-haskell-operator">&gt;</span> getHomeDirectory
<span class="org-string">"/home/tux"</span>
<span class="org-haskell-operator">&gt;</span> 
<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">getAppUserDataDirectory</span> <span class="org-string">"myApp"</span>
<span class="org-string">"/home/tux/.myApp"</span>
<span class="org-haskell-operator">&gt;</span> 
<span class="org-haskell-operator">&gt;</span> getUserDocumentsDirectory
<span class="org-string">"/home/tux"</span>
<span class="org-haskell-operator">&gt;</span>
</pre>
</div>

<p>
<b>Running External Commands</b>
</p>

<div class="org-src-container">

<pre class="src src-haskell"><span class="org-haskell-operator">&gt;</span> <span class="org-haskell-keyword">import</span> <span class="org-haskell-constructor">System.Cmd</span>
<span class="org-haskell-operator">&gt;</span> 
<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-constructor">:</span>t rawSystem
<span class="org-haskell-definition">rawSystem</span> <span class="org-haskell-operator">::</span> <span class="org-haskell-type">String</span> <span class="org-haskell-operator">-&gt;</span> [<span class="org-haskell-type">String</span>] <span class="org-haskell-operator">-&gt;</span> <span class="org-haskell-type">IO</span> <span class="org-haskell-type">GHC.IO.Exception.ExitCode</span>
<span class="org-haskell-operator">&gt;</span> 
<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">rawSystem</span> <span class="org-string">"ls"</span> [<span class="org-string">"-l"</span>, <span class="org-string">"/usr"</span>]
<span class="org-haskell-definition">total</span> 260
drwxr<span class="org-haskell-definition">-</span>xr<span class="org-haskell-operator">-</span>x   2 root root 118784 <span class="org-haskell-constructor">Abr</span> 26 03<span class="org-haskell-constructor">:</span>38 bin
drwxr<span class="org-haskell-definition">-</span>xr<span class="org-haskell-operator">-</span>x   2 root root   4096 <span class="org-haskell-constructor">Abr</span> 10  2014 games
drwxr<span class="org-haskell-definition">-</span>xr<span class="org-haskell-operator">-</span>x 131 root root  36864 <span class="org-haskell-constructor">Mar</span> 11 01<span class="org-haskell-constructor">:</span>38 include
drwxr<span class="org-haskell-definition">-</span>xr<span class="org-haskell-operator">-</span>x 261 root root  53248 <span class="org-haskell-constructor">Abr</span> 14 16<span class="org-haskell-constructor">:</span>46 lib
drwxr<span class="org-haskell-definition">-</span>xr<span class="org-haskell-operator">-</span>x  10 root root   4096 <span class="org-haskell-constructor">Dez</span>  2 18<span class="org-haskell-constructor">:</span>55 local
drwxr<span class="org-haskell-definition">-</span>xr<span class="org-haskell-operator">-</span>x   2 root root  12288 <span class="org-haskell-constructor">Abr</span>  3 13<span class="org-haskell-constructor">:</span>28 sbin
drwxr<span class="org-haskell-definition">-</span>xr<span class="org-haskell-operator">-</span>x 460 root root  20480 <span class="org-haskell-constructor">Abr</span> 26 03<span class="org-haskell-constructor">:</span>38 share
drwxr<span class="org-haskell-definition">-</span>xr<span class="org-haskell-operator">-</span>x  13 root root   4096 <span class="org-haskell-constructor">Jan</span> 13 21<span class="org-haskell-constructor">:</span>03 src
<span class="org-haskell-constructor">ExitSuccess</span>
<span class="org-haskell-operator">&gt;</span>
</pre>
</div>

<p>
<b>Reading input from a system command in Haskell</b>
</p>

<p>
This command executes ls -la and gets the output.
</p>

<div class="org-src-container">

<pre class="src src-haskell"><span class="org-haskell-keyword">import</span> <span class="org-haskell-constructor">System.Process</span>
<span class="org-haskell-definition">test</span> <span class="org-haskell-operator">=</span> readProcess <span class="org-string">"ls"</span> [<span class="org-string">"-a"</span>] <span class="org-string">""</span>


<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-keyword">import</span> <span class="org-haskell-constructor">System.Process</span>
<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-keyword">let</span> test <span class="org-haskell-operator">=</span> readProcess <span class="org-string">"ls"</span> [<span class="org-string">"-a"</span>] <span class="org-string">""</span>
<span class="org-haskell-operator">&gt;</span> 
<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-constructor">:</span>t test
<span class="org-haskell-definition">test</span> <span class="org-haskell-operator">::</span> <span class="org-haskell-type">IO</span> <span class="org-haskell-type">String</span>
<span class="org-haskell-operator">&gt;</span> 
<span class="org-haskell-operator">&gt;</span> test <span class="org-haskell-definition">&gt;&gt;=</span> putStrLn 
<span class="org-haskell-operator">.</span>
<span class="org-haskell-operator">..</span>
adt2<span class="org-haskell-definition">.</span>py
adt<span class="org-haskell-definition">.</span>py
build<span class="org-haskell-definition">.</span>sh
build_zeromq<span class="org-haskell-definition">.</span>sh
clean<span class="org-haskell-definition">.</span>sh
codes
comparison<span class="org-haskell-definition">.</span>ods
dict<span class="org-haskell-definition">.</span>sh
ffi
figure1<span class="org-haskell-definition">.</span>png
<span class="org-haskell-operator">.</span>git
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-1-2" class="outline-3">
<h3 id="sec-1-2"><span class="section-number-3">1.2</span> Data.Time</h3>
<div class="outline-text-3" id="text-1-2">
</div><div id="outline-container-sec-1-2-1" class="outline-4">
<h4 id="sec-1-2-1"><span class="section-number-4">1.2.1</span> System</h4>
</div>

<div id="outline-container-sec-1-2-2" class="outline-4">
<h4 id="sec-1-2-2"><span class="section-number-4">1.2.2</span> Get current year / month / day in Haskell</h4>
<div class="outline-text-4" id="text-1-2-2">
<p>
UTC time:
</p>

<p>
Note that the UTC time might differ from your local time depending on the timezone.
</p>

<div class="org-src-container">

<pre class="src src-haskell"><span class="org-haskell-keyword">import</span> <span class="org-haskell-constructor">Data.Time.Clock</span>
<span class="org-haskell-keyword">import</span> <span class="org-haskell-constructor">Data.Time.Calendar</span>

<span class="org-haskell-definition">main</span> <span class="org-haskell-operator">=</span> <span class="org-haskell-keyword">do</span>
    now <span class="org-haskell-operator">&lt;-</span> getCurrentTime
    <span class="org-haskell-keyword">let</span> (year, month, day) <span class="org-haskell-operator">=</span> toGregorian <span class="org-haskell-operator">$</span> utctDay now
    putStrLn <span class="org-haskell-operator">$</span> <span class="org-string">"Year: "</span> <span class="org-haskell-operator">++</span> show year
    putStrLn <span class="org-haskell-operator">$</span> <span class="org-string">"Month: "</span> <span class="org-haskell-operator">++</span> show month
    putStrLn <span class="org-haskell-operator">$</span> <span class="org-string">"Day: "</span> <span class="org-haskell-operator">++</span> show day
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-1-2-3" class="outline-4">
<h4 id="sec-1-2-3"><span class="section-number-4">1.2.3</span> Get Current Time</h4>
<div class="outline-text-4" id="text-1-2-3">
<p>
Local time:
</p>

<p>
It is also possible to get your current local time using your systemâ€™s default timezone:
</p>

<div class="org-src-container">

<pre class="src src-haskell"><span class="org-haskell-keyword">import</span> <span class="org-haskell-constructor">Data.Time.Clock</span>
<span class="org-haskell-keyword">import</span> <span class="org-haskell-constructor">Data.Time.Calendar</span>
<span class="org-haskell-keyword">import</span> <span class="org-haskell-constructor">Data.Time.LocalTime</span>

<span class="org-haskell-definition">main</span> <span class="org-haskell-operator">=</span> <span class="org-haskell-keyword">do</span>
    now <span class="org-haskell-operator">&lt;-</span> getCurrentTime
    timezone <span class="org-haskell-operator">&lt;-</span> getCurrentTimeZone
    <span class="org-haskell-keyword">let</span> zoneNow <span class="org-haskell-operator">=</span> utcToLocalTime timezone now
    <span class="org-haskell-keyword">let</span> (year, month, day) <span class="org-haskell-operator">=</span> toGregorian <span class="org-haskell-operator">$</span> localDay zoneNow
    putStrLn <span class="org-haskell-operator">$</span> <span class="org-string">"Year: "</span> <span class="org-haskell-operator">++</span> show year
    putStrLn <span class="org-haskell-operator">$</span> <span class="org-string">"Month: "</span> <span class="org-haskell-operator">++</span> show month
    putStrLn <span class="org-haskell-operator">$</span> <span class="org-string">"Day: "</span> <span class="org-haskell-operator">++</span> show day
</pre>
</div>


<div class="org-src-container">

<pre class="src src-haskell"><span class="org-haskell-keyword">import</span> <span class="org-haskell-constructor">Data.Time.Clock</span>
<span class="org-haskell-keyword">import</span> <span class="org-haskell-constructor">Data.Time.LocalTime</span>

<span class="org-haskell-definition">main</span> <span class="org-haskell-operator">=</span> <span class="org-haskell-keyword">do</span>
    now <span class="org-haskell-operator">&lt;-</span> getCurrentTime
    timezone <span class="org-haskell-operator">&lt;-</span> getCurrentTimeZone
    <span class="org-haskell-keyword">let</span> (<span class="org-haskell-constructor">TimeOfDay</span> hour minute second) <span class="org-haskell-operator">=</span> localTimeOfDay <span class="org-haskell-operator">$</span> utcToLocalTime timezone now
    putStrLn <span class="org-haskell-operator">$</span> <span class="org-string">"Hour: "</span> <span class="org-haskell-operator">++</span> show hour
    putStrLn <span class="org-haskell-operator">$</span> <span class="org-string">"Minute: "</span> <span class="org-haskell-operator">++</span> show minute
    <span class="org-comment-delimiter">-- </span><span class="org-comment">Note: Second is of type @Pico@: It contains a fractional part.</span>
    <span class="org-comment-delimiter">-- </span><span class="org-comment">Use @fromIntegral@ to convert it to a plain integer.</span>
    putStrLn <span class="org-haskell-operator">$</span> <span class="org-string">"Second: "</span> <span class="org-haskell-operator">++</span> show second
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-1-2-4" class="outline-4">
<h4 id="sec-1-2-4"><span class="section-number-4">1.2.4</span> Documentation By Examples - GHCI shell</h4>
<div class="outline-text-4" id="text-1-2-4">
</div><div id="outline-container-sec-1-2-4-1" class="outline-5">
<h5 id="sec-1-2-4-1"><span class="section-number-5">1.2.4.1</span> Date Time Manipulation</h5>
<div class="outline-text-5" id="text-1-2-4-1">
<div class="org-src-container">

<pre class="src src-haskell"><span class="org-haskell-keyword">import</span> <span class="org-haskell-constructor">Data.Time</span>

<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-constructor">:</span>t getCurrentTime
<span class="org-haskell-definition">getCurrentTime</span> <span class="org-haskell-operator">::</span> <span class="org-haskell-type">IO</span> <span class="org-haskell-type">UTCTime</span>
<span class="org-haskell-operator">&gt;</span> 


<span class="org-haskell-operator">&gt;</span> t <span class="org-haskell-operator">&lt;-</span> getCurrentTime
<span class="org-haskell-operator">&gt;</span> t
2015<span class="org-haskell-operator">-</span>03<span class="org-haskell-operator">-</span>04 23<span class="org-haskell-constructor">:</span>22<span class="org-haskell-constructor">:</span>39.046752 <span class="org-haskell-constructor">UTC</span>
<span class="org-haskell-operator">&gt;</span> 

<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-constructor">:</span>t t
<span class="org-haskell-definition">t</span> <span class="org-haskell-operator">::</span> <span class="org-haskell-type">UTCTime</span>


<span class="org-haskell-operator">&gt;</span> today <span class="org-haskell-operator">&lt;-</span> fmap utctDay getCurrentTime 
<span class="org-haskell-operator">&gt;</span> today
2015<span class="org-haskell-operator">-</span>03<span class="org-haskell-operator">-</span>04
<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-constructor">:</span>t today
<span class="org-haskell-definition">today</span> <span class="org-haskell-operator">::</span> <span class="org-haskell-type">Day</span>
<span class="org-haskell-operator">&gt;</span> 
<span class="org-haskell-operator">&gt;</span> 

<span class="org-haskell-operator">&gt;</span>  <span class="org-haskell-keyword">let</span> (year, <span class="org-haskell-keyword">_</span>, <span class="org-haskell-keyword">_</span>) <span class="org-haskell-operator">=</span> toGregorian today
<span class="org-haskell-operator">&gt;</span> year
2015
<span class="org-haskell-operator">&gt;</span> 

<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-constructor">:</span>t fromGregorian 2015 0 0
<span class="org-haskell-definition">fromGregorian</span> 2015 0 0 <span class="org-haskell-operator">::</span> <span class="org-haskell-type">Day</span>

<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">fromGregorian</span> 2015 0 0
2015<span class="org-haskell-operator">-</span>01<span class="org-haskell-operator">-</span>01
<span class="org-haskell-operator">&gt;</span> 

<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">diffDays</span> today (fromGregorian year 0 0)
62
<span class="org-haskell-operator">&gt;</span> 

<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-keyword">import</span> <span class="org-haskell-constructor">Text.Printf</span>
<span class="org-haskell-operator">&gt;</span>
<span class="org-haskell-operator">&gt;</span> tm <span class="org-haskell-operator">&lt;-</span> getCurrentTime
<span class="org-haskell-operator">&gt;</span>  <span class="org-haskell-keyword">let</span> (year, month, day) <span class="org-haskell-operator">=</span> toGregorian (utctDay tm)
<span class="org-haskell-operator">&gt;</span> year
2015
<span class="org-haskell-operator">&gt;</span> month
3
<span class="org-haskell-operator">&gt;</span> day
4
<span class="org-haskell-operator">&gt;</span> 

<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">printf</span> <span class="org-string">"The current date is %04d %02d %02d\n"</span> year month day
<span class="org-haskell-constructor">The</span> current date is 2015 03 04


<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-keyword">import</span> <span class="org-haskell-constructor">System.Locale</span>
<span class="org-haskell-operator">&gt;</span> 
<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">fmap</span> (formatTime defaultTimeLocale <span class="org-string">"%Y-%m-%d"</span>) getCurrentTime
<span class="org-string">"2015-03-04"</span>
<span class="org-haskell-operator">&gt;</span> 
<span class="org-haskell-operator">&gt;</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-1-2-4-2" class="outline-5">
<h5 id="sec-1-2-4-2"><span class="section-number-5">1.2.4.2</span> Difference between two dates</h5>
<div class="outline-text-5" id="text-1-2-4-2">
<div class="org-src-container">

<pre class="src src-haskell"><span class="org-haskell-operator">&gt;</span> <span class="org-haskell-keyword">import</span> <span class="org-haskell-constructor">Data.Time</span>
<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-keyword">import</span> <span class="org-haskell-constructor">Data.Time.Clock.POSIX</span>
<span class="org-haskell-operator">&gt;</span> 

<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-keyword">let</span> bree <span class="org-haskell-operator">=</span> <span class="org-haskell-constructor">UTCTime</span> (fromGregorian 1981 6 16) (timeOfDayToTime <span class="org-haskell-operator">$</span> <span class="org-haskell-constructor">TimeOfDay</span> 4 35 25) <span class="org-comment-delimiter">-- </span><span class="org-comment">1981-06-16 04:35:25 UTC</span>
<span class="org-haskell-operator">&gt;</span> bree
1981<span class="org-haskell-operator">-</span>06<span class="org-haskell-operator">-</span>16 04<span class="org-haskell-constructor">:</span>35<span class="org-haskell-constructor">:</span>25 <span class="org-haskell-constructor">UTC</span>
<span class="org-haskell-operator">&gt;</span> 


<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-keyword">let</span> nat  <span class="org-haskell-operator">=</span> <span class="org-haskell-constructor">UTCTime</span> (fromGregorian 1973 1 18) (timeOfDayToTime <span class="org-haskell-operator">$</span> <span class="org-haskell-constructor">TimeOfDay</span> 3 45 50) <span class="org-comment-delimiter">-- </span><span class="org-comment">1973-01-18 03:45:50 UTC</span>
<span class="org-haskell-operator">&gt;</span> nat
1973<span class="org-haskell-operator">-</span>01<span class="org-haskell-operator">-</span>18 03<span class="org-haskell-constructor">:</span>45<span class="org-haskell-constructor">:</span>50 <span class="org-haskell-constructor">UTC</span>
<span class="org-haskell-operator">&gt;</span> 


<span class="org-haskell-operator">&gt;</span> 
<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-keyword">let</span> bree' <span class="org-haskell-operator">=</span> read <span class="org-string">"1981-06-16 04:35:25"</span> <span class="org-haskell-operator">::</span> <span class="org-haskell-type">UTCTime</span>
<span class="org-haskell-operator">&gt;</span> bree'
1981<span class="org-haskell-operator">-</span>06<span class="org-haskell-operator">-</span>16 04<span class="org-haskell-constructor">:</span>35<span class="org-haskell-constructor">:</span>25 <span class="org-haskell-constructor">UTC</span>
<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-constructor">:</span>t bree'
<span class="org-haskell-definition">bree'</span> <span class="org-haskell-operator">::</span> <span class="org-haskell-type">UTCTime</span>
<span class="org-haskell-operator">&gt;</span> 
<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-keyword">let</span> nat'  <span class="org-haskell-operator">=</span> read <span class="org-string">"1973-01-18 03:45:50"</span> <span class="org-haskell-operator">::</span> <span class="org-haskell-type">UTCTime</span>
<span class="org-haskell-operator">&gt;</span> 
<span class="org-haskell-operator">&gt;</span> nat'
1973<span class="org-haskell-operator">-</span>01<span class="org-haskell-operator">-</span>18 03<span class="org-haskell-constructor">:</span>45<span class="org-haskell-constructor">:</span>50 <span class="org-haskell-constructor">UTC</span>
<span class="org-haskell-operator">&gt;</span> 


<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">difference</span> <span class="org-haskell-operator">=</span> diffUTCTime bree nat <span class="org-haskell-operator">/</span> posixDayLength
<span class="org-haskell-operator">&gt;</span> difference 
3071.03443287037s
<span class="org-haskell-operator">&gt;</span> 

<span class="org-haskell-operator">&gt;</span>  <span class="org-string">"There were "</span> <span class="org-haskell-operator">++</span> (show <span class="org-haskell-operator">$</span> round difference) <span class="org-haskell-operator">++</span> <span class="org-string">" days between Nat and Bree"</span>
<span class="org-string">"There were 3071 days between Nat and Bree"</span>
<span class="org-haskell-operator">&gt;</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-1-2-4-3" class="outline-5">
<h5 id="sec-1-2-4-3"><span class="section-number-5">1.2.4.3</span> Day in a Week/Month/Year or Week Number</h5>
<div class="outline-text-5" id="text-1-2-4-3">
<div class="org-src-container">

<pre class="src src-haskell"><span class="org-haskell-operator">&gt;</span> <span class="org-haskell-keyword">import</span> <span class="org-haskell-constructor">Data.Time</span>
<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-keyword">import</span> <span class="org-haskell-constructor">Data.Time.Calendar.MonthDay</span>
<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-keyword">import</span> <span class="org-haskell-constructor">Data.Time.Calendar.OrdinalDate</span>
<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-keyword">import</span> <span class="org-haskell-constructor">System.Locale</span>

<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-constructor">:</span>t fromGregorian
<span class="org-haskell-definition">fromGregorian</span> <span class="org-haskell-operator">::</span> <span class="org-haskell-type">Integer</span> <span class="org-haskell-operator">-&gt;</span> <span class="org-haskell-type">Int</span> <span class="org-haskell-operator">-&gt;</span> <span class="org-haskell-type">Int</span> <span class="org-haskell-operator">-&gt;</span> <span class="org-haskell-type">Day</span>

<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-keyword">let</span> (year, month, day) <span class="org-haskell-operator">=</span> (1981, 6, 16) <span class="org-haskell-operator">::</span> (<span class="org-haskell-type">Integer</span> , <span class="org-haskell-type">Int</span> , <span class="org-haskell-type">Int</span> )
<span class="org-haskell-operator">&gt;</span> 
<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-keyword">let</span> date <span class="org-haskell-operator">=</span> (fromGregorian year month day)
<span class="org-haskell-operator">&gt;</span> date
1981<span class="org-haskell-operator">-</span>06<span class="org-haskell-operator">-</span>16
<span class="org-haskell-operator">&gt;</span> 
<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-keyword">let</span> (week, week_day) <span class="org-haskell-operator">=</span> sundayStartWeek date
<span class="org-haskell-operator">&gt;</span> week
24
<span class="org-haskell-operator">&gt;</span> week_day
2
<span class="org-haskell-operator">&gt;</span> 

<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-keyword">let</span> (year_, year_day) <span class="org-haskell-operator">=</span> toOrdinalDate date
<span class="org-haskell-operator">&gt;</span> year_
1981
<span class="org-haskell-operator">&gt;</span> year_day
167
<span class="org-haskell-operator">&gt;</span> 


<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-keyword">let</span> (week_day_name, <span class="org-haskell-keyword">_</span>) <span class="org-haskell-operator">=</span> wDays defaultTimeLocale <span class="org-haskell-operator">!!</span> week_day
<span class="org-haskell-operator">&gt;</span> week_day_name
<span class="org-string">"Tuesday"</span>
<span class="org-haskell-operator">&gt;</span> 

<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-constructor">:</span>t defaultTimeLocale 
<span class="org-haskell-definition">defaultTimeLocale</span> <span class="org-haskell-operator">::</span> <span class="org-haskell-type">TimeLocale</span>
<span class="org-haskell-operator">&gt;</span> 
<span class="org-haskell-operator">&gt;</span> defaultTimeLocale 
<span class="org-haskell-constructor">TimeLocale</span> {wDays <span class="org-haskell-operator">=</span> [(<span class="org-string">"Sunday"</span>,<span class="org-string">"Sun"</span>),(<span class="org-string">"Monday"</span>,<span class="org-string">"Mon"</span>),(<span class="org-string">"Tuesday"</span>,<span class="org-string">"Tue"</span>),(<span class="org-string">"Wednesday"</span>,<span class="org-string">"Wed"</span>),(<span class="org-string">"Thursday"</span>,<span class="org-string">"Thu"</span>),(<span class="org-string">"Friday"</span>,<span class="org-string">"Fri"</span>),(<span class="org-string">"Saturday"</span>,<span class="org-string">"Sat"</span>)], months <span class="org-haskell-operator">=</span> [(<span class="org-string">"January"</span>,<span class="org-string">"Jan"</span>),(<span class="org-string">"February"</span>,<span class="org-string">"Feb"</span>),(<span class="org-string">"March"</span>,<span class="org-string">"Mar"</span>),(<span class="org-string">"April"</span>,<span class="org-string">"Apr"</span>),(<span class="org-string">"May"</span>,<span class="org-string">"May"</span>),(<span class="org-string">"June"</span>,<span class="org-string">"Jun"</span>),(<span class="org-string">"July"</span>,<span class="org-string">"Jul"</span>),(<span class="org-string">"August"</span>,<span class="org-string">"Aug"</span>),(<span class="org-string">"September"</span>,<span class="org-string">"Sep"</span>),(<span class="org-string">"October"</span>,<span class="org-string">"Oct"</span>),(<span class="org-string">"November"</span>,<span class="org-string">"Nov"</span>),(<span class="org-string">"December"</span>,<span class="org-string">"Dec"</span>)], intervals <span class="org-haskell-operator">=</span> [(<span class="org-string">"year"</span>,<span class="org-string">"years"</span>),(<span class="org-string">"month"</span>,<span class="org-string">"months"</span>),(<span class="org-string">"day"</span>,<span class="org-string">"days"</span>),(<span class="org-string">"hour"</span>,<span class="org-string">"hours"</span>),(<span class="org-string">"min"</span>,<span class="org-string">"mins"</span>),(<span class="org-string">"sec"</span>,<span class="org-string">"secs"</span>),(<span class="org-string">"usec"</span>,<span class="org-string">"usecs"</span>)], amPm <span class="org-haskell-operator">=</span> (<span class="org-string">"AM"</span>,<span class="org-string">"PM"</span>), dateTimeFmt <span class="org-haskell-operator">=</span> <span class="org-string">"%a %b %e %H:%M:%S %Z %Y"</span>, dateFmt <span class="org-haskell-operator">=</span> <span class="org-string">"%m/%d/%y"</span>, timeFmt <span class="org-haskell-operator">=</span> <span class="org-string">"%H:%M:%S"</span>, time12Fmt <span class="org-haskell-operator">=</span> <span class="org-string">"%I:%M:%S %p"</span>}
<span class="org-haskell-operator">&gt;</span> 
<span class="org-haskell-operator">&gt;</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-1-2-4-4" class="outline-5">
<h5 id="sec-1-2-4-4"><span class="section-number-5">1.2.4.4</span> Parsing Dates and Times from Strings</h5>
<div class="outline-text-5" id="text-1-2-4-4">
<div class="org-src-container">

<pre class="src src-haskell"><span class="org-haskell-operator">&gt;</span> <span class="org-haskell-keyword">import</span> <span class="org-haskell-constructor">Data.Time</span>
<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-keyword">import</span> <span class="org-haskell-constructor">Data.Time.Format</span>
<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-keyword">import</span> <span class="org-haskell-constructor">Data.Time.Clock.POSIX</span>
<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-keyword">import</span> <span class="org-haskell-constructor">System.Locale</span>

<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-keyword">let</span> day<span class="org-haskell-operator">::</span> <span class="org-haskell-type">Day</span> ; day <span class="org-haskell-operator">=</span> readTime defaultTimeLocale <span class="org-string">"%F"</span> <span class="org-string">"1998-06-03"</span>
<span class="org-haskell-operator">&gt;</span> 
<span class="org-haskell-operator">&gt;</span> day
1998<span class="org-haskell-operator">-</span>06<span class="org-haskell-operator">-</span>03
<span class="org-haskell-operator">&gt;</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-1-2-4-5" class="outline-5">
<h5 id="sec-1-2-4-5"><span class="section-number-5">1.2.4.5</span> Printing a Date</h5>
<div class="outline-text-5" id="text-1-2-4-5">
<div class="org-src-container">

<pre class="src src-haskell"><span class="org-haskell-operator">&gt;</span> <span class="org-haskell-keyword">import</span> <span class="org-haskell-constructor">Data.Time</span>
<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-keyword">import</span> <span class="org-haskell-constructor">Data.Time.Format</span>
<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-keyword">import</span> <span class="org-haskell-constructor">System.Locale</span>
<span class="org-haskell-operator">&gt;</span> 
<span class="org-haskell-operator">&gt;</span> now <span class="org-haskell-operator">&lt;-</span> getCurrentTime
<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-constructor">:</span>t now
<span class="org-haskell-definition">now</span> <span class="org-haskell-operator">::</span> <span class="org-haskell-type">UTCTime</span>
<span class="org-haskell-operator">&gt;</span> 
<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">formatTime</span> defaultTimeLocale <span class="org-string">"The date is %A (%a) %d/%m/%Y"</span> now
<span class="org-string">"The date is Wednesday (Wed) 04/03/2015"</span>
<span class="org-haskell-operator">&gt;</span> 
<span class="org-haskell-operator">&gt;</span> 

<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-keyword">let</span> t <span class="org-haskell-operator">=</span> <span class="org-haskell-keyword">do</span> now <span class="org-haskell-operator">&lt;-</span> getCurrentTime ; return <span class="org-haskell-operator">$</span> formatTime defaultTimeLocale <span class="org-string">"The date is %A (%a) %d/%m/%Y"</span> now
<span class="org-haskell-operator">&gt;</span> t
<span class="org-string">"The date is Wednesday (Wed) 04/03/2015"</span>
<span class="org-haskell-operator">&gt;</span>
</pre>
</div>


<p>
Credits: 
</p>

<ul class="org-ul">
<li><a href="http://techoverflow.net/blog/2014/06/13/get-current-year-month-day-in-haskell/">http://techoverflow.net/blog/2014/06/13/get-current-year-month-day-in-haskell/</a>
</li>
<li><a href="http://techoverflow.net/blog/2014/08/24/get-current-hour-minute-second-in-haskell/">http://techoverflow.net/blog/2014/08/24/get-current-hour-minute-second-in-haskell/</a>
</li>
<li><a href="http://pleac.sourceforge.net/pleac_haskell/datesandtimes.html">http://pleac.sourceforge.net/pleac_haskell/datesandtimes.html</a>
</li>
</ul>
</div>
</div>
</div>
</div>

<div id="outline-container-sec-1-3" class="outline-3">
<h3 id="sec-1-3"><span class="section-number-3">1.3</span> Bytestring</h3>
<div class="outline-text-3" id="text-1-3">
</div><div id="outline-container-sec-1-3-1" class="outline-4">
<h4 id="sec-1-3-1"><span class="section-number-4">1.3.1</span> Overview</h4>
<div class="outline-text-4" id="text-1-3-1">
<p>
Bytestring is a built in library for fast and efficient string and binary data processing. ByteStrings are not designed for Unicode. For Unicode strings the Text type must be used from the text package. 
</p>


<p>
There are two flavours of bytestring, the lazy and strict.
</p>


<ul class="org-ul">
<li>Strict Bytestring: Data.ByteString
</li>
</ul>

<p>
String as a single large array, suitable for passing data between C and Haskell. 
</p>

<ul class="org-ul">
<li>Lazy   Bytestring: Data.ByteString.Lazy 
</li>
</ul>

<p>
Lazy list of strict chunks which makes it suitable for I/O streaming tasks
</p>

<p>
<b>Import Bytestring</b>
</p>

<p>
To avoid name conflicts the modules must be imported as qualified.
</p>

<div class="org-src-container">

<pre class="src src-haskell"><span class="org-haskell-keyword">import</span> <span class="org-haskell-keyword">qualified</span> <span class="org-haskell-constructor">Data.ByteString</span> <span class="org-haskell-keyword">as</span> <span class="org-haskell-constructor">B</span>
<span class="org-haskell-keyword">import</span> <span class="org-haskell-keyword">qualified</span> <span class="org-haskell-constructor">Data.ByteString.Char8</span> <span class="org-haskell-keyword">as</span> <span class="org-haskell-constructor">BC</span>

<span class="org-haskell-keyword">import</span> <span class="org-haskell-keyword">qualified</span> <span class="org-haskell-constructor">Data.ByteString.Lazy</span> <span class="org-haskell-keyword">as</span> <span class="org-haskell-constructor">BL</span>
<span class="org-haskell-keyword">import</span> <span class="org-haskell-keyword">qualified</span> <span class="org-haskell-constructor">Data.ByteString.Lazy.Char8</span> <span class="org-haskell-keyword">as</span> <span class="org-haskell-constructor">BLC</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-1-3-2" class="outline-4">
<h4 id="sec-1-3-2"><span class="section-number-4">1.3.2</span> Example</h4>
<div class="outline-text-4" id="text-1-3-2">
<div class="org-src-container">

<pre class="src src-haskell">    <span class="org-haskell-operator">&gt;</span> <span class="org-haskell-keyword">import</span> <span class="org-haskell-keyword">qualified</span> <span class="org-haskell-constructor">Data.ByteString</span> <span class="org-haskell-keyword">as</span> <span class="org-haskell-constructor">B</span>
    <span class="org-haskell-operator">&gt;</span> <span class="org-haskell-keyword">import</span> <span class="org-haskell-keyword">qualified</span> <span class="org-haskell-constructor">Data.ByteString.Char8</span> <span class="org-haskell-keyword">as</span> <span class="org-haskell-constructor">BC</span>
    <span class="org-haskell-operator">&gt;</span> 
    <span class="org-haskell-operator">&gt;</span> <span class="org-haskell-keyword">import</span> <span class="org-haskell-keyword">qualified</span> <span class="org-haskell-constructor">Data.ByteString.Lazy</span> <span class="org-haskell-keyword">as</span> <span class="org-haskell-constructor">BL</span>
    <span class="org-haskell-operator">&gt;</span> <span class="org-haskell-keyword">import</span> <span class="org-haskell-keyword">qualified</span> <span class="org-haskell-constructor">Data.ByteString.Lazy.Char8</span> <span class="org-haskell-keyword">as</span> <span class="org-haskell-constructor">BLC</span>
    <span class="org-haskell-operator">&gt;</span> 
    <span class="org-haskell-operator">&gt;</span> <span class="org-haskell-keyword">let</span> (<span class="org-haskell-operator">|&gt;</span>) x f <span class="org-haskell-operator">=</span> f x
    <span class="org-haskell-operator">&gt;</span> 


<span class="org-comment-delimiter">{- </span><span class="org-comment">String to Bytestring -}</span>
<span class="org-comment-delimiter">{-</span><span class="org-comment">--------------------------------------------}</span>

    <span class="org-haskell-operator">&gt;</span> BC.pack <span class="org-string">"hello world"</span> 
    <span class="org-string">"hello world"</span>

    <span class="org-haskell-operator">&gt;</span> BC.pack <span class="org-string">"&#269;u&#353;paj&#382;&#26085;&#26412;&#35486;"</span>
    <span class="org-string">"\ruapaj~\229,\158"</span>
    <span class="org-haskell-operator">&gt;</span> 
    <span class="org-haskell-operator">&gt;</span> <span class="org-haskell-constructor">:</span>t BC.pack <span class="org-string">"&#269;u&#353;paj&#382;&#26085;&#26412;&#35486;"</span>
    BC.pack <span class="org-string">"&#269;u&#353;paj&#382;&#26085;&#26412;&#35486;"</span> <span class="org-haskell-operator">::</span> <span class="org-haskell-type">B.ByteString</span>
    <span class="org-haskell-operator">&gt;</span> 

<span class="org-comment-delimiter">{- </span><span class="org-comment">Strict to Lazy Conversion -}</span>
<span class="org-comment-delimiter">{-</span><span class="org-comment">--------------------------------------------}</span>

    <span class="org-haskell-operator">&gt;</span> <span class="org-haskell-keyword">let</span> s_strict <span class="org-haskell-operator">=</span> BC.pack  <span class="org-string">"&#269;u&#353;paj&#382;&#26085;&#26412;&#35486;"</span>
    <span class="org-haskell-operator">&gt;</span> s_strict 
    <span class="org-string">"\ruapaj~\229,\158"</span>
    <span class="org-haskell-operator">&gt;</span> 

    <span class="org-haskell-operator">&gt;</span> <span class="org-haskell-keyword">let</span> s_lazy <span class="org-haskell-operator">=</span> BLC.pack  <span class="org-string">"&#269;u&#353;paj&#382;&#26085;&#26412;&#35486;"</span> 
    <span class="org-haskell-operator">&gt;</span> s_lazy 
    <span class="org-string">"\ruapaj~\229,\158"</span>
    <span class="org-haskell-operator">&gt;</span> 
    <span class="org-haskell-operator">&gt;</span> <span class="org-haskell-constructor">:</span>t s_
    s_lazy    s_strict
    <span class="org-haskell-operator">&gt;</span> <span class="org-haskell-constructor">:</span>t s_lazy 
    s_lazy <span class="org-haskell-operator">::</span> <span class="org-haskell-type">BL.ByteString</span>
    <span class="org-haskell-operator">&gt;</span> 

    <span class="org-comment-delimiter">{- </span><span class="org-comment">Strict to Lazy -}</span>

    <span class="org-haskell-operator">&gt;</span> <span class="org-haskell-type">:</span>t BL.fromChunks
    BL.fromChunks <span class="org-haskell-operator">::</span> [<span class="org-haskell-type">B.ByteString</span>] <span class="org-haskell-operator">-&gt;</span> <span class="org-haskell-type">BL.ByteString</span>
    <span class="org-haskell-operator">&gt;</span> 

    <span class="org-haskell-operator">&gt;</span> <span class="org-haskell-keyword">let</span> new_lazy <span class="org-haskell-operator">=</span> BL.fromChunks [s_strict]
    <span class="org-haskell-operator">&gt;</span> new_lazy 
    <span class="org-string">"\ruapaj~\229,\158"</span>
    <span class="org-haskell-operator">&gt;</span> <span class="org-haskell-constructor">:</span>t new_lazy
    new_lazy <span class="org-haskell-operator">::</span> <span class="org-haskell-type">BL.ByteString</span>
    <span class="org-haskell-operator">&gt;</span> 


<span class="org-comment-delimiter">{- </span><span class="org-comment">Lazy to Strict -}</span>
<span class="org-comment-delimiter">{-</span><span class="org-comment">--------------------------------------------}</span>

    <span class="org-haskell-operator">&gt;</span> <span class="org-haskell-keyword">let</span> new_strict <span class="org-haskell-operator">=</span> B.concat <span class="org-haskell-operator">$</span> BL.toChunks s_lazy 
    <span class="org-haskell-operator">&gt;</span> new_strict 
    <span class="org-string">"\ruapaj~\229,\158"</span>
    <span class="org-haskell-operator">&gt;</span> <span class="org-haskell-constructor">:</span>t new_strict
    new_strict <span class="org-haskell-operator">::</span> <span class="org-haskell-type">B.ByteString</span>
    <span class="org-haskell-operator">&gt;</span> 

    <span class="org-haskell-operator">&gt;</span> BC.putStrLn new_strict 
    uapaj<span class="org-haskell-operator">~&#65533;</span>,<span class="org-haskell-operator">&#65533;</span>
    <span class="org-haskell-operator">&gt;</span> 

    <span class="org-haskell-operator">&gt;</span> BLC.putStrLn new_lazy 
    uapaj<span class="org-haskell-operator">~&#65533;</span>,<span class="org-haskell-operator">&#65533;</span>
    <span class="org-haskell-operator">&gt;</span> 


<span class="org-comment-delimiter">{- </span><span class="org-comment">Serialization -}</span>
<span class="org-comment-delimiter">{-</span><span class="org-comment">--------------------------------------------}</span>

    <span class="org-haskell-operator">&gt;</span> <span class="org-haskell-keyword">import</span> <span class="org-haskell-keyword">qualified</span> <span class="org-haskell-constructor">Data.Binary</span> <span class="org-haskell-keyword">as</span> <span class="org-haskell-constructor">D</span>
    <span class="org-haskell-operator">&gt;</span> <span class="org-comment-delimiter">{- </span><span class="org-comment">Serializes Haskell Data to Lazy Bytestring -}</span>
    <span class="org-haskell-operator">&gt;</span> 

    <span class="org-haskell-operator">&gt;</span> <span class="org-haskell-constructor">:</span>t D.encode
    D.encode <span class="org-haskell-operator">::</span> <span class="org-haskell-type">D.Binary</span> a <span class="org-haskell-operator">=&gt;</span> a <span class="org-haskell-operator">-&gt;</span> <span class="org-haskell-type">BL.ByteString</span>
    <span class="org-haskell-operator">&gt;</span> 

    <span class="org-haskell-operator">&gt;</span> <span class="org-haskell-type">:</span>t D.decode
    D.decode <span class="org-haskell-operator">::</span> <span class="org-haskell-type">D.Binary</span> a <span class="org-haskell-operator">=&gt;</span> <span class="org-haskell-type">BL.ByteString</span> <span class="org-haskell-operator">-&gt;</span> a
    <span class="org-haskell-operator">&gt;</span>


    <span class="org-haskell-operator">&gt;</span> <span class="org-haskell-keyword">let</span> a <span class="org-haskell-operator">=</span> D.encode 10 
    <span class="org-haskell-operator">&gt;</span> a
    <span class="org-string">"\NUL\NUL\NUL\NUL\n"</span>
    <span class="org-haskell-operator">&gt;</span> <span class="org-haskell-constructor">:</span>t a
    a <span class="org-haskell-operator">::</span> <span class="org-haskell-type">BL.ByteString</span>
    <span class="org-haskell-operator">&gt;</span> 
    <span class="org-haskell-operator">&gt;</span> D.decode a
    <span class="org-haskell-constructor">()</span>
    <span class="org-haskell-operator">&gt;</span> D.decode a <span class="org-haskell-operator">::</span> <span class="org-haskell-type">Int</span>
    <span class="org-haskell-operator">***</span> <span class="org-haskell-type">Exception:</span> Data.Binary.Get.runGet at position 0<span class="org-haskell-type">:</span> demandInput<span class="org-haskell-type">:</span> not enough bytes
    <span class="org-haskell-operator">&gt;</span> D.decode a <span class="org-haskell-operator">::</span> <span class="org-haskell-type">Integer</span>
    10
    <span class="org-haskell-operator">&gt;</span> 



    <span class="org-haskell-operator">&gt;</span> <span class="org-haskell-keyword">let</span> b <span class="org-haskell-operator">=</span> D.encode (<span class="org-haskell-constructor">Just</span> 10 <span class="org-haskell-operator">::</span> <span class="org-haskell-type">Maybe</span> <span class="org-haskell-type">Int</span>)
    <span class="org-haskell-operator">&gt;</span> <span class="org-haskell-constructor">:</span>t b
    b <span class="org-haskell-operator">::</span> <span class="org-haskell-type">BL.ByteString</span>
    <span class="org-haskell-operator">&gt;</span> b
    <span class="org-string">"\SOH\NUL\NUL\NUL\NUL\NUL\NUL\NUL\n"</span>
    <span class="org-haskell-operator">&gt;</span> 

    <span class="org-haskell-operator">&gt;</span> D.decode b <span class="org-haskell-operator">::</span> <span class="org-haskell-type">Maybe</span> <span class="org-haskell-type">Int</span>
    <span class="org-haskell-constructor">Just</span> 10
    <span class="org-haskell-operator">&gt;</span>

    <span class="org-haskell-operator">&gt;</span> <span class="org-haskell-keyword">let</span> c <span class="org-haskell-operator">=</span> D.encode (<span class="org-haskell-constructor">Nothing</span> <span class="org-haskell-operator">::</span> <span class="org-haskell-type">Maybe</span> <span class="org-haskell-type">Int</span>)
    <span class="org-haskell-operator">&gt;</span> c
    <span class="org-string">"\NUL"</span>
    <span class="org-haskell-operator">&gt;</span>
    <span class="org-haskell-operator">&gt;</span> D.decode c <span class="org-haskell-operator">::</span> <span class="org-haskell-type">Maybe</span> <span class="org-haskell-type">Int</span>
    <span class="org-haskell-constructor">Nothing</span>
    <span class="org-haskell-operator">&gt;</span>


    <span class="org-haskell-operator">&gt;</span> <span class="org-haskell-keyword">let</span> d <span class="org-haskell-operator">=</span> D.encode (3.11415e4 <span class="org-haskell-operator">::</span> <span class="org-haskell-type">Double</span>)
    <span class="org-haskell-operator">&gt;</span> d
    <span class="org-string">"\SOH\SOH\NUL\NUL\NUL\NUL\NUL\NUL\NUL\a\NUL\NUL\NUL\NUL`i\RS\255\255\255\255\255\255\255\218"</span>
    <span class="org-haskell-operator">&gt;</span> 

<span class="org-comment-delimiter">{- </span><span class="org-comment">Bytes to Bytestring -}</span>
<span class="org-comment-delimiter">{-</span><span class="org-comment">--------------------------------------------}</span>

    <span class="org-comment-delimiter">{- </span><span class="org-comment">Bytes are encoded as Word8 -}</span>

    <span class="org-haskell-operator">&gt;</span> <span class="org-haskell-constructor">:</span>t B.pack
    B.pack <span class="org-haskell-operator">::</span> [<span class="org-haskell-type">GHC.Word.Word8</span>] <span class="org-haskell-operator">-&gt;</span> <span class="org-haskell-type">B.ByteString</span>
    <span class="org-haskell-operator">&gt;</span> <span class="org-haskell-type">:</span>t B.unpack
    B.unpack <span class="org-haskell-operator">::</span> <span class="org-haskell-type">B.ByteString</span> <span class="org-haskell-operator">-&gt;</span> [<span class="org-haskell-type">GHC.Word.Word8</span>]
    <span class="org-haskell-operator">&gt;</span> 
    <span class="org-haskell-operator">&gt;</span> <span class="org-haskell-type">:</span>t BL.pack
    BL.pack <span class="org-haskell-operator">::</span> [<span class="org-haskell-type">GHC.Word.Word8</span>] <span class="org-haskell-operator">-&gt;</span> <span class="org-haskell-type">BL.ByteString</span>
    <span class="org-haskell-operator">&gt;</span> <span class="org-haskell-type">:</span>t BL.unpack
    BL.unpack <span class="org-haskell-operator">::</span> <span class="org-haskell-type">BL.ByteString</span> <span class="org-haskell-operator">-&gt;</span> [<span class="org-haskell-type">GHC.Word.Word8</span>]
    <span class="org-haskell-operator">&gt;</span> 

    <span class="org-haskell-operator">&gt;</span> <span class="org-haskell-keyword">let</span> msg <span class="org-haskell-operator">=</span> B.pack [72,101,108,108,111,32,119,111,114,108,100]
    <span class="org-haskell-operator">&gt;</span> msg
    <span class="org-string">"Hello world"</span>

    <span class="org-haskell-operator">&gt;</span> <span class="org-haskell-keyword">let</span> bytes <span class="org-haskell-operator">=</span> B.unpack msg
    <span class="org-haskell-operator">&gt;</span> bytes
    [72,101,108,108,111,32,119,111,114,108,100]
    <span class="org-haskell-operator">&gt;</span> 

    <span class="org-haskell-operator">&gt;</span> <span class="org-haskell-constructor">:</span>t msg
    msg <span class="org-haskell-operator">::</span> <span class="org-haskell-type">B.ByteString</span>

    <span class="org-haskell-operator">&gt;</span> <span class="org-haskell-type">:</span>t bytes
    bytes <span class="org-haskell-operator">::</span> [<span class="org-haskell-type">GHC.Word.Word8</span>]
    <span class="org-haskell-operator">&gt;</span> 

    <span class="org-comment-delimiter">{- </span><span class="org-comment">Word8 to Int -}</span>

    <span class="org-haskell-operator">&gt;</span> <span class="org-haskell-type">:</span>t fromIntegral 
    fromIntegral <span class="org-haskell-operator">::</span> (<span class="org-haskell-type">Num</span> b, <span class="org-haskell-type">Integral</span> a) <span class="org-haskell-operator">=&gt;</span> a <span class="org-haskell-operator">-&gt;</span> b
    <span class="org-haskell-operator">&gt;</span> 

    <span class="org-haskell-operator">&gt;</span> <span class="org-haskell-keyword">let</span> x <span class="org-haskell-operator">=</span> 100 <span class="org-haskell-operator">::</span> <span class="org-haskell-type">GHC.Word.Word8</span>
    <span class="org-haskell-operator">&gt;</span> x
    100
    <span class="org-haskell-operator">&gt;</span> <span class="org-haskell-constructor">:</span>t x
    x <span class="org-haskell-operator">::</span> <span class="org-haskell-type">GHC.Word.Word8</span>
    <span class="org-haskell-operator">&gt;</span> 

    <span class="org-haskell-operator">&gt;</span> <span class="org-haskell-keyword">let</span> y <span class="org-haskell-operator">=</span> fromIntegral x <span class="org-haskell-operator">::</span> <span class="org-haskell-type">Int</span>
    <span class="org-haskell-operator">&gt;</span> y
    100
    <span class="org-haskell-operator">&gt;</span> <span class="org-haskell-constructor">:</span>t y
    y <span class="org-haskell-operator">::</span> <span class="org-haskell-type">Int</span>
    <span class="org-haskell-operator">&gt;</span> 

    <span class="org-haskell-operator">&gt;</span> fromIntegral ( 100 <span class="org-haskell-operator">::</span> <span class="org-haskell-type">GHC.Word.Word8</span>) <span class="org-haskell-operator">::</span> <span class="org-haskell-type">Int</span>
    100
    <span class="org-haskell-operator">&gt;</span> 

    <span class="org-haskell-operator">&gt;</span> <span class="org-haskell-keyword">let</span> bytes_int <span class="org-haskell-operator">=</span> map (<span class="org-haskell-operator">\</span>x <span class="org-haskell-operator">-&gt;</span> fromIntegral x <span class="org-haskell-operator">::</span> <span class="org-haskell-type">Int</span>) bytes
    <span class="org-haskell-operator">&gt;</span> bytes_int 
    [72,101,108,108,111,32,119,111,114,108,100]
    <span class="org-haskell-operator">&gt;</span> <span class="org-haskell-constructor">:</span>t bytes_int 
    bytes_int <span class="org-haskell-operator">::</span> [<span class="org-haskell-type">Int</span>]
    <span class="org-haskell-operator">&gt;</span> 

    <span class="org-haskell-operator">&gt;</span> <span class="org-haskell-keyword">let</span> bytes_word8 <span class="org-haskell-operator">=</span> map (<span class="org-haskell-operator">\</span>x <span class="org-haskell-operator">-&gt;</span> fromIntegral x <span class="org-haskell-operator">::</span>  <span class="org-haskell-type">GHC.Word.Word8</span>) bytes_int 
    <span class="org-haskell-operator">&gt;</span> bytes_word8 
    [72,101,108,108,111,32,119,111,114,108,100]
    <span class="org-haskell-operator">&gt;</span> <span class="org-haskell-constructor">:</span>t bytes_word8 
    bytes_word8 <span class="org-haskell-operator">::</span> [<span class="org-haskell-type">GHC.Word.Word8</span>]
    <span class="org-haskell-operator">&gt;</span> 

<span class="org-comment-delimiter">{- </span><span class="org-comment">Bytes in Hexadecimal and Binary Format -}</span>

    <span class="org-haskell-operator">&gt;</span> <span class="org-haskell-keyword">import</span> <span class="org-haskell-constructor">Numeric</span> (showHex, showIntAtBase)
    <span class="org-haskell-operator">&gt;</span> <span class="org-haskell-keyword">import</span> <span class="org-haskell-constructor">Data.Char</span> (intToDigit)
    <span class="org-haskell-operator">&gt;</span> <span class="org-haskell-keyword">import</span> <span class="org-haskell-constructor">Data.Bits</span> (shiftL, shiftR, (<span class="org-haskell-operator">.&amp;.</span>), (<span class="org-haskell-operator">.|.</span>))
    <span class="org-haskell-operator">&gt;</span> <span class="org-haskell-keyword">import</span> <span class="org-haskell-constructor">Data.Word</span> (<span class="org-haskell-constructor">Word8</span>)

    <span class="org-haskell-operator">&gt;</span> 
        <span class="org-comment-delimiter">{- </span><span class="org-comment">Bytes in Hexadecimal Format Low Endian -}</span>
    <span class="org-haskell-operator">&gt;</span> map (<span class="org-haskell-operator">\</span>n <span class="org-haskell-operator">-&gt;</span> showHex n <span class="org-string">""</span>) bytes
    [<span class="org-string">"48"</span>,<span class="org-string">"65"</span>,<span class="org-string">"6c"</span>,<span class="org-string">"6c"</span>,<span class="org-string">"6f"</span>,<span class="org-string">"20"</span>,<span class="org-string">"77"</span>,<span class="org-string">"6f"</span>,<span class="org-string">"72"</span>,<span class="org-string">"6c"</span>,<span class="org-string">"64"</span>]
    <span class="org-haskell-operator">&gt;</span> 
    <span class="org-haskell-operator">&gt;</span> 

    <span class="org-comment-delimiter">{- </span><span class="org-comment">Bytes in Hexadecimal Format Big Endian -}</span>

    <span class="org-haskell-operator">&gt;</span> reverse <span class="org-haskell-operator">$</span> map (<span class="org-haskell-operator">\</span>n <span class="org-haskell-operator">-&gt;</span> showHex n <span class="org-string">""</span>) bytes
    [<span class="org-string">"64"</span>,<span class="org-string">"6c"</span>,<span class="org-string">"72"</span>,<span class="org-string">"6f"</span>,<span class="org-string">"77"</span>,<span class="org-string">"20"</span>,<span class="org-string">"6f"</span>,<span class="org-string">"6c"</span>,<span class="org-string">"6c"</span>,<span class="org-string">"65"</span>,<span class="org-string">"48"</span>]
    <span class="org-haskell-operator">&gt;</span> 

    <span class="org-comment-delimiter">{- </span><span class="org-comment">Hexadecimal String Low Endian -}</span>

    <span class="org-haskell-operator">&gt;</span> concat <span class="org-haskell-operator">$</span> map (<span class="org-haskell-operator">\</span>n <span class="org-haskell-operator">-&gt;</span> showHex n <span class="org-string">""</span>) bytes
    <span class="org-string">"48656c6c6f20776f726c64"</span>
    <span class="org-haskell-operator">&gt;</span> 

    <span class="org-comment-delimiter">{- </span><span class="org-comment">Hexadecimal String Bing Ending -}</span>
    <span class="org-haskell-operator">&gt;</span> concat <span class="org-haskell-operator">$</span> reverse <span class="org-haskell-operator">$</span> map (<span class="org-haskell-operator">\</span>n <span class="org-haskell-operator">-&gt;</span> showHex n <span class="org-string">""</span>) bytes
    <span class="org-string">"646c726f77206f6c6c6548"</span>
    <span class="org-haskell-operator">&gt;</span> 

    <span class="org-comment-delimiter">{- </span><span class="org-comment">Hexadecimal number to bytes -}</span>


    <span class="org-haskell-operator">&gt;</span> 
    <span class="org-haskell-operator">&gt;</span> <span class="org-haskell-keyword">let</span> num2hex <span class="org-haskell-operator">=</span> <span class="org-haskell-operator">\</span>n <span class="org-haskell-operator">-&gt;</span> showHex n <span class="org-string">""</span>
    <span class="org-haskell-operator">&gt;</span> 
    <span class="org-haskell-operator">&gt;</span> <span class="org-haskell-keyword">let</span> x <span class="org-haskell-operator">=</span> 0x646c726f77206f6c6c6548
    <span class="org-haskell-operator">&gt;</span> x
    121404708502361365413651784
    <span class="org-haskell-operator">&gt;</span> 
    <span class="org-haskell-operator">&gt;</span> num2hex x
    <span class="org-string">"646c726f77206f6c6c6548"</span>
    <span class="org-haskell-operator">&gt;</span> 

    <span class="org-comment-delimiter">{- </span><span class="org-comment">Split Bytes -}</span>
    <span class="org-comment-delimiter">{-</span><span class="org-comment">------------------------------------------}</span>

    <span class="org-haskell-operator">&gt;</span> iterate (<span class="org-haskell-operator">\</span>x <span class="org-haskell-operator">-&gt;</span> shiftR x 8) 0x646c726f77206f6c6c6548 <span class="org-haskell-operator">|&gt;</span> takeWhile ((<span class="org-haskell-operator">/=</span>) 0) <span class="org-haskell-operator">|&gt;</span> map (<span class="org-haskell-operator">.&amp;.</span> 0xFF)
    [72,101,108,108,111,32,119,111,114,108,100]
    <span class="org-haskell-operator">&gt;</span> 
    <span class="org-haskell-operator">&gt;</span>  map num2hex <span class="org-haskell-operator">.</span>  map (<span class="org-haskell-operator">.&amp;.</span> 0xFF) <span class="org-haskell-operator">.</span> takeWhile ((<span class="org-haskell-operator">/=</span>) 0) <span class="org-haskell-operator">.</span>  iterate (<span class="org-haskell-operator">\</span>x <span class="org-haskell-operator">-&gt;</span> shiftR x 8) <span class="org-haskell-operator">$</span>  0x646c726f77206f6c6c6548
    [<span class="org-string">"48"</span>,<span class="org-string">"65"</span>,<span class="org-string">"6c"</span>,<span class="org-string">"6c"</span>,<span class="org-string">"6f"</span>,<span class="org-string">"20"</span>,<span class="org-string">"77"</span>,<span class="org-string">"6f"</span>,<span class="org-string">"72"</span>,<span class="org-string">"6c"</span>,<span class="org-string">"64"</span>]
    <span class="org-haskell-operator">&gt;</span>

    <span class="org-haskell-operator">&gt;</span> iterate (<span class="org-haskell-operator">\</span>x <span class="org-haskell-operator">-&gt;</span> shiftR x 8) 0x646c726f77206f6c6c6548 <span class="org-haskell-operator">|&gt;</span> takeWhile ((<span class="org-haskell-operator">/=</span>) 0) <span class="org-haskell-operator">|&gt;</span> map (<span class="org-haskell-operator">.&amp;.</span> 0xFF) <span class="org-haskell-operator">|&gt;</span> map num2hex
    [<span class="org-string">"48"</span>,<span class="org-string">"65"</span>,<span class="org-string">"6c"</span>,<span class="org-string">"6c"</span>,<span class="org-string">"6f"</span>,<span class="org-string">"20"</span>,<span class="org-string">"77"</span>,<span class="org-string">"6f"</span>,<span class="org-string">"72"</span>,<span class="org-string">"6c"</span>,<span class="org-string">"64"</span>]
    <span class="org-haskell-operator">&gt;</span> 

    <span class="org-haskell-operator">&gt;</span> iterate (<span class="org-haskell-operator">\</span>x <span class="org-haskell-operator">-&gt;</span> shiftR x 8) 0x646c726f77206f6c6c6548 <span class="org-haskell-operator">|&gt;</span> takeWhile ((<span class="org-haskell-operator">/=</span>) 0) <span class="org-haskell-operator">|&gt;</span> map (<span class="org-haskell-operator">.&amp;.</span> 0xFF) <span class="org-haskell-operator">|&gt;</span> map num2hex <span class="org-haskell-operator">|&gt;</span> concat
    <span class="org-string">"48656c6c6f20776f726c64"</span>
    <span class="org-haskell-operator">&gt;</span> 
    <span class="org-haskell-operator">&gt;</span> iterate (<span class="org-haskell-operator">\</span>x <span class="org-haskell-operator">-&gt;</span> shiftR x 8) 0x646c726f77206f6c6c6548 <span class="org-haskell-operator">|&gt;</span> takeWhile ((<span class="org-haskell-operator">/=</span>) 0) <span class="org-haskell-operator">|&gt;</span> map (<span class="org-haskell-operator">.&amp;.</span> 0xFF) <span class="org-haskell-operator">|&gt;</span> map num2hex <span class="org-haskell-operator">|&gt;</span> reverse <span class="org-haskell-operator">|&gt;</span> concat
    <span class="org-string">"646c726f77206f6c6c6548"</span>
    <span class="org-haskell-operator">&gt;</span> 

    <span class="org-haskell-operator">&gt;</span> <span class="org-haskell-keyword">let</span> int2word8 <span class="org-haskell-operator">=</span> <span class="org-haskell-operator">\</span>x <span class="org-haskell-operator">-&gt;</span> fromIntegral x <span class="org-haskell-operator">::</span> <span class="org-haskell-type">Word8</span>
    <span class="org-haskell-operator">&gt;</span> 
    <span class="org-haskell-operator">&gt;</span> <span class="org-haskell-keyword">let</span> num2bytes <span class="org-haskell-operator">=</span> map int2word8 <span class="org-haskell-operator">.</span> map (<span class="org-haskell-operator">.&amp;.</span> 0xFF) <span class="org-haskell-operator">.</span> takeWhile ((<span class="org-haskell-operator">/=</span>) 0) <span class="org-haskell-operator">.</span>  iterate (<span class="org-haskell-operator">\</span>x <span class="org-haskell-operator">-&gt;</span> shiftR x 8)

    <span class="org-haskell-operator">&gt;</span> <span class="org-haskell-constructor">:</span>t num2bytes
    num2bytes <span class="org-haskell-operator">::</span> (<span class="org-haskell-type">Data.Bits.Bits</span> a, <span class="org-haskell-type">Integral</span> a) <span class="org-haskell-operator">=&gt;</span> a <span class="org-haskell-operator">-&gt;</span> [<span class="org-haskell-type">Word8</span>]
    <span class="org-haskell-operator">&gt;</span> 
    <span class="org-haskell-operator">&gt;</span> 
    <span class="org-haskell-operator">&gt;</span> num2bytes 0x646c726f77206f6c6c6548
    [72,101,108,108,111,32,119,111,114,108,100]
    <span class="org-haskell-operator">&gt;</span> 
    <span class="org-haskell-operator">&gt;</span> num2bytes 0x646c726f77206f6c6c6548 <span class="org-haskell-operator">|&gt;</span> map num2hex
    [<span class="org-string">"48"</span>,<span class="org-string">"65"</span>,<span class="org-string">"6c"</span>,<span class="org-string">"6c"</span>,<span class="org-string">"6f"</span>,<span class="org-string">"20"</span>,<span class="org-string">"77"</span>,<span class="org-string">"6f"</span>,<span class="org-string">"72"</span>,<span class="org-string">"6c"</span>,<span class="org-string">"64"</span>]
    <span class="org-haskell-operator">&gt;</span> 

    <span class="org-haskell-operator">&gt;</span> num2bytes 0x646c726f77206f6c6c6548 <span class="org-haskell-operator">|&gt;</span> BL.pack 
    <span class="org-string">"Hello world"</span>
    <span class="org-haskell-operator">&gt;</span> 
    <span class="org-haskell-operator">&gt;</span> 

    <span class="org-comment-delimiter">{- </span><span class="org-comment">Bytes to Int -}</span>

    <span class="org-haskell-operator">&gt;</span> <span class="org-haskell-keyword">let</span> bytes <span class="org-haskell-operator">=</span> [72,101,108,108,111,32,119,111,114,108,100]
    <span class="org-haskell-operator">&gt;</span> foldr (<span class="org-haskell-operator">\</span>b0 b1 <span class="org-haskell-operator">-&gt;</span> (shiftL b1 8) <span class="org-haskell-operator">+</span> b0) 0 bytes
    121404708502361365413651784

    <span class="org-haskell-operator">&gt;</span> num2hex <span class="org-haskell-operator">.</span> foldr (<span class="org-haskell-operator">\</span>b0 b1 <span class="org-haskell-operator">-&gt;</span> (shiftL b1 8) <span class="org-haskell-operator">+</span> b0) 0 <span class="org-haskell-operator">$</span> bytes 
    <span class="org-string">"646c726f77206f6c6c6548"</span>
    <span class="org-haskell-operator">&gt;</span> 

    <span class="org-haskell-operator">&gt;</span> <span class="org-haskell-keyword">let</span> bytes2int <span class="org-haskell-operator">=</span>  foldr (<span class="org-haskell-operator">\</span>b0 b1 <span class="org-haskell-operator">-&gt;</span> (shiftL b1 8) <span class="org-haskell-operator">+</span> b0) 0
    <span class="org-haskell-operator">&gt;</span> bytes2int bytes
    121404708502361365413651784
    <span class="org-haskell-operator">&gt;</span>
</pre>
</div>


<p>
<b>See also</b>
</p>

<p>
<b>Base64 Algorithm</b>
</p>

<ul class="org-ul">
<li><a href="http://web.archive.org/web/20131125120025/http://www.apps.ietf.org/rfc/rfc4648.html">RFC4648 - The Base16, Base32, and Base64 Data Encodings</a>
</li>

<li><a href="http://tenminutetutor.com/base64-encoding">Ten Minute Tutor - Base64 encoding</a>
</li>
</ul>
</div>
</div>


<div id="outline-container-sec-1-3-3" class="outline-4">
<h4 id="sec-1-3-3"><span class="section-number-4">1.3.3</span> Documentation in Hackage</h4>
<div class="outline-text-4" id="text-1-3-3">
<p>
<b>ByteString</b>
</p>

<p>
<b>An efficient compact, immutable byte string type (both strict and lazy) suitable for binary or 8-bit character data.</b>
</p>

<p>
<b>The ByteString type represents sequences of bytes or 8-bit characters. It is suitable for high performance use, both in terms of large data quantities, or high speed requirements. The ByteString functions follow the same style as Haskell's ordinary lists, so it is easy to convert code from using String to ByteString.</b>
</p>

<ul class="org-ul">
<li><a href="http://hackage.haskell.org/package/bytestring">Bytestring Package</a>
</li>
<li><a href="http://hackage.haskell.org/package/bytestring-0.10.6.0/docs/Data-ByteString.html">Data.ByteString</a>
</li>
<li><a href="http://hackage.haskell.org/package/bytestring-0.10.6.0/docs/Data-ByteString-Char8.html">Data.ByteString.Char8</a>
</li>
<li><a href="http://hackage.haskell.org/package/bytestring-0.10.6.0/docs/Data-ByteString-Lazy-Char8.html">Data.ByteString.Lazy.Char8</a>
</li>
</ul>

<p>
<b>Data.Word</b>
</p>

<p>
<b>Unsigned integer types: Word8, Word16, Word32, Word64</b>
</p>

<p>
<a href="http://hackage.haskell.org/package/base-4.7.0.1/docs/Data-Word.html">Data.Word</a>
</p>

<p>
<b>Data.Binary package</b>
</p>

<p>
<b>Binary serialisation of Haskell values to and from lazy ByteStrings. The Binary library provides methods for encoding Haskell values as streams of bytes directly in memory. The resulting ByteString can then be written to disk, sent over the network, or futher processed (for example, compressed with gzip).</b>
</p>

<ul class="org-ul">
<li><a href="http://hackage.haskell.org/package/binary-0.5.0.2">Data.Binary</a>
</li>
</ul>


<p>
<b>Data.Bits package</b>
</p>

<p>
<b>This module defines bitwise operations for signed and unsigned integers. Instances of the class Bits for the Int and Integer types are available from this module, and instances for explicitly sized integral types are available from the Data.Int and Data.Word modules.</b>
</p>

<ul class="org-ul">
<li><a href="https://downloads.haskell.org/~ghc/latest/docs/html/libraries/base/Data-Bits.html">Data.Bits</a>
</li>
</ul>


<p>
<b>Numeric</b>
</p>

<p>
<b>Odds and ends, mostly functions for reading and showing RealFloat-like kind of values.</b>
</p>

<p>
<a href="http://hackage.haskell.org/package/base-4.7.0.1/docs/Numeric.html">Numeric</a>
</p>

<p>
<b>Data.Char</b>
</p>

<p>
<b>The Char type and associated operations.</b>
</p>

<p>
<a href="http://hackage.haskell.org/package/base-4.8.0.0/docs/Data-Char.html">Data.Char</a>
</p>
</div>
</div>
</div>

<div id="outline-container-sec-1-4" class="outline-3">
<h3 id="sec-1-4"><span class="section-number-3">1.4</span> Parse Binary Files</h3>
<div class="outline-text-3" id="text-1-4">
<p>
To decode a binary file it is necessary to know:
</p>

<ul class="org-ul">
<li>The Binary file format or specification
</li>
<li>File Signature that comes in the file header.
</li>
<li>Data Size (8 bits signed, 8 bits unsigned, &#x2026;.)
</li>
<li>Byte Endianess or Byte order (Little Endian or Big Endian)
</li>
</ul>


<p>
This section will show how to parse the windows executable, PE32 executable.
</p>

<p>
<b>PE32 Layout Specification</b>
</p>

<ul class="org-ul">
<li><a href="https://media.blackhat.com/bh-us-11/Vuksan/BH_US_11_VuksanPericin_PECOFF_WP.pdf">Undocumented PECOFF - Reversing Labs</a>
</li>

<li><a href="https://en.wikipedia.org/wiki/Portable_Executable">https://en.wikipedia.org/wiki/Portable_Executable</a> 
</li>

<li><a href="http://www.csn.ul.ie/~caolan/publink/winresdump/winresdump/doc/pefile.html">http://www.csn.ul.ie/~caolan/publink/winresdump/winresdump/doc/pefile.html</a> 
</li>
</ul>


<div class="org-src-container">

<pre class="src src-haskell"><span class="org-haskell-keyword">import</span> <span class="org-haskell-constructor">Data.Word</span> <span class="org-comment-delimiter">--</span><span class="org-comment">- Unsigned integer types: Word8, Word16, Word32, Word64 </span>

<span class="org-haskell-keyword">import</span> <span class="org-haskell-constructor">Data.ByteString.Lazy</span> <span class="org-haskell-keyword">as</span> <span class="org-haskell-constructor">BL</span>
<span class="org-haskell-keyword">import</span> <span class="org-haskell-constructor">Data.ByteString.Char8</span> <span class="org-haskell-keyword">as</span> <span class="org-haskell-constructor">BC</span>
<span class="org-haskell-keyword">import</span> <span class="org-haskell-constructor">Data.Binary</span>
<span class="org-haskell-keyword">import</span> <span class="org-haskell-constructor">Data.Binary.Get</span>

<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-keyword">let</span> (<span class="org-haskell-operator">|&gt;</span>) x f <span class="org-haskell-operator">=</span> f x
<span class="org-haskell-operator">&gt;</span> 

<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-constructor">:</span>t BL.readFile 
BL<span class="org-haskell-definition">.</span>readFile <span class="org-haskell-operator">::</span> <span class="org-haskell-type">FilePath</span> <span class="org-haskell-operator">-&gt;</span> <span class="org-haskell-type">IO</span> <span class="org-haskell-type">BL.ByteString</span>

<span class="org-haskell-operator">&gt;</span> fdata <span class="org-haskell-operator">&lt;-</span> BL.readFile <span class="org-string">"notepad.exe"</span> 
<span class="org-haskell-operator">&gt;</span> 
<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-constructor">:</span>t fdata
<span class="org-haskell-definition">fdata</span> <span class="org-haskell-operator">::</span> <span class="org-haskell-type">BL.ByteString</span>
<span class="org-haskell-operator">&gt;</span> 

<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-type">:</span>t BL.take 
BL<span class="org-haskell-definition">.</span>take <span class="org-haskell-operator">::</span> <span class="org-haskell-type">GHC.Int.Int64</span> <span class="org-haskell-operator">-&gt;</span> <span class="org-haskell-type">BL.ByteString</span> <span class="org-haskell-operator">-&gt;</span> <span class="org-haskell-type">BL.ByteString</span>


<span class="org-comment-delimiter">{- </span><span class="org-comment">Read File Signare 2 bytes, always 0x5A4D OR ("MZ")</span>
<span class="org-comment"> - </span>
<span class="org-comment"> -}</span>
<span class="org-haskell-operator">&gt;</span> BL<span class="org-haskell-definition">.</span>take 2 fdata
<span class="org-string">"MZ"</span>
<span class="org-haskell-operator">&gt;</span> 

<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-keyword">let</span> toHex <span class="org-haskell-operator">::</span> [<span class="org-haskell-type">Word8</span>] <span class="org-haskell-operator">-&gt;</span> [<span class="org-haskell-type">String</span>] ;toHex <span class="org-haskell-operator">=</span> Prelude.map ( (<span class="org-haskell-operator">\</span>n <span class="org-haskell-operator">-&gt;</span> showHex n <span class="org-string">""</span>) <span class="org-haskell-operator">.</span> (<span class="org-haskell-operator">\</span>x <span class="org-haskell-operator">-&gt;</span> fromIntegral x <span class="org-haskell-operator">::</span> <span class="org-haskell-type">Int</span>) )
<span class="org-haskell-operator">&gt;</span> 
<span class="org-haskell-operator">&gt;</span>  BL.take 2 fdata <span class="org-haskell-operator">|&gt;</span> BL.unpack <span class="org-haskell-operator">|&gt;</span> toHex 
[<span class="org-string">"4d"</span>,<span class="org-string">"5a"</span>]
<span class="org-haskell-operator">&gt;</span> 

<span class="org-haskell-definition">read_dosHeader</span> <span class="org-haskell-operator">=</span> <span class="org-haskell-keyword">do</span>
</pre>
</div>

<p>
<b>PE32 Documentation</b>
</p>

<ul class="org-ul">
<li><a href="https://en.wikibooks.org/wiki/X86_Disassembly/Windows_Executable_Files#MS-DOS_COM_Files">https://en.wikibooks.org/wiki/X86_Disassembly/Windows_Executable_Files#MS-DOS_COM_Files</a>
</li>
</ul>


<div class="figure">
<p><img src="https://commons.wikimedia.org/wiki/File:RevEngPEFile.JPG" alt="File:RevEngPEFile.JPG" />
</p>
</div>

<p>
Dos Header Structure
</p>

<p>
From:
</p>

<ul class="org-ul">
<li><a href="http://www.joachim-bauch.de/tutorials/loading-a-dll-from-memory/">http://www.joachim-bauch.de/tutorials/loading-a-dll-from-memory/</a> 
</li>
</ul>

<div class="org-src-container">

<pre class="src src-C"><span class="org-keyword">typedef</span> <span class="org-keyword">struct</span> <span class="org-type">_IMAGE_DOS_HEADER</span> {      <span class="org-comment-delimiter">// </span><span class="org-comment">DOS .EXE header</span>
    <span class="org-type">WORD</span>   <span class="org-variable-name">e_magic</span>;                     <span class="org-comment-delimiter">// </span><span class="org-comment">Magic number</span>
    <span class="org-type">WORD</span>   <span class="org-variable-name">e_cblp</span>;                      <span class="org-comment-delimiter">// </span><span class="org-comment">Bytes on last page of file</span>
    <span class="org-type">WORD</span>   <span class="org-variable-name">e_cp</span>;                        <span class="org-comment-delimiter">// </span><span class="org-comment">Pages in file</span>
    <span class="org-type">WORD</span>   <span class="org-variable-name">e_crlc</span>;                      <span class="org-comment-delimiter">// </span><span class="org-comment">Relocations</span>
    <span class="org-type">WORD</span>   <span class="org-variable-name">e_cparhdr</span>;                   <span class="org-comment-delimiter">// </span><span class="org-comment">Size of header in paragraphs</span>
    <span class="org-type">WORD</span>   <span class="org-variable-name">e_minalloc</span>;                  <span class="org-comment-delimiter">// </span><span class="org-comment">Minimum extra paragraphs needed</span>
    <span class="org-type">WORD</span>   <span class="org-variable-name">e_maxalloc</span>;                  <span class="org-comment-delimiter">// </span><span class="org-comment">Maximum extra paragraphs needed</span>
    <span class="org-type">WORD</span>   <span class="org-variable-name">e_ss</span>;                        <span class="org-comment-delimiter">// </span><span class="org-comment">Initial (relative) SS value</span>
    <span class="org-type">WORD</span>   <span class="org-variable-name">e_sp</span>;                        <span class="org-comment-delimiter">// </span><span class="org-comment">Initial SP value</span>
    <span class="org-type">WORD</span>   <span class="org-variable-name">e_csum</span>;                      <span class="org-comment-delimiter">// </span><span class="org-comment">Checksum</span>
    <span class="org-type">WORD</span>   <span class="org-variable-name">e_ip</span>;                        <span class="org-comment-delimiter">// </span><span class="org-comment">Initial IP value</span>
    <span class="org-type">WORD</span>   <span class="org-variable-name">e_cs</span>;                        <span class="org-comment-delimiter">// </span><span class="org-comment">Initial (relative) CS value</span>
    <span class="org-type">WORD</span>   <span class="org-variable-name">e_lfarlc</span>;                    <span class="org-comment-delimiter">// </span><span class="org-comment">File address of relocation table</span>
    <span class="org-type">WORD</span>   <span class="org-variable-name">e_ovno</span>;                      <span class="org-comment-delimiter">// </span><span class="org-comment">Overlay number</span>
    <span class="org-type">WORD</span>   <span class="org-variable-name">e_res</span>[4];                    <span class="org-comment-delimiter">// </span><span class="org-comment">Reserved words</span>
    <span class="org-type">WORD</span>   <span class="org-variable-name">e_oemid</span>;                     <span class="org-comment-delimiter">// </span><span class="org-comment">OEM identifier (for e_oeminfo)</span>
    <span class="org-type">WORD</span>   <span class="org-variable-name">e_oeminfo</span>;                   <span class="org-comment-delimiter">// </span><span class="org-comment">OEM information; e_oemid specific</span>
    <span class="org-type">WORD</span>   <span class="org-variable-name">e_res2</span>[10];                  <span class="org-comment-delimiter">// </span><span class="org-comment">Reserved words</span>
    <span class="org-type">LONG</span>   <span class="org-variable-name">e_lfanew</span>;                    <span class="org-comment-delimiter">// </span><span class="org-comment">File address of new exe header</span>
  } <span class="org-type">IMAGE_DOS_HEADER</span>, *<span class="org-type">PIMAGE_DOS_HEADER</span>;
</pre>
</div>

<p>
COFF Header
</p>

<pre class="example">
struct COFFHeader
{
   short Machine;
   short NumberOfSections;
   long TimeDateStamp;
   long PointerToSymbolTable;
   long NumberOfSymbols;
   short SizeOfOptionalHeader;
   short Characteristics;
}
</pre>
</div>
</div>

<div id="outline-container-sec-1-5" class="outline-3">
<h3 id="sec-1-5"><span class="section-number-3">1.5</span> GnuPlot</h3>
<div class="outline-text-3" id="text-1-5">
<p>
Installation:
</p>

<pre class="example">
$ cabal install gnuplot
$ sudo apt-get install gnuplot-x11 # Ubuntu/ Debian
</pre>

<p>
Examples:
</p>

<div class="org-src-container">

<pre class="src src-haskell"><span class="org-haskell-operator">&gt;</span> <span class="org-haskell-keyword">import</span> <span class="org-haskell-constructor">Graphics.Gnuplot.Simple</span>
<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">plotList</span> <span class="org-haskell-constructor">[]</span> [(1, 1), (2, 2), (3, 3)]
</pre>
</div>

<div class="org-src-container">

<pre class="src src-haskell"><span class="org-haskell-operator">&gt;</span> <span class="org-haskell-keyword">import</span> <span class="org-haskell-constructor">Graphics.Gnuplot.Simple</span>
<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">plotFunc</span> <span class="org-haskell-constructor">[]</span> (linearScale 1000 (<span class="org-haskell-operator">-</span>20,20)) (<span class="org-haskell-operator">\</span>x <span class="org-haskell-operator">-&gt;</span> sin x <span class="org-haskell-operator">/</span> x)
</pre>
</div>

<div class="org-src-container">

<pre class="src src-haskell"><span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">plotList</span> [<span class="org-haskell-constructor">Title</span> <span class="org-string">"A title"</span>, <span class="org-haskell-constructor">XLabel</span> <span class="org-string">"x label"</span>] [(2,10),(3,15),(4,14),(5,19)]
<span class="org-haskell-operator">&gt;</span> <span class="org-haskell-definition">plotList</span> [<span class="org-haskell-constructor">Title</span> <span class="org-string">"A title"</span>, <span class="org-haskell-constructor">XLabel</span> <span class="org-string">"x label"</span>, <span class="org-haskell-constructor">YLabel</span> <span class="org-string">"the y label"</span>] [(2,10),(3,15),(4,14),(5,19)]
</pre>
</div>

<p>
<b>Doucumentation</b>
</p>

<p>
<b>This is a wrapper to gnuplot which lets you create 2D and 3D plots.</b>
<b>Start a simple session with make ghci. This loads the module Graphics.Gnuplot.Simple which is ready for use in GHCi. It does not address all fancy gnuplot features in order to stay simple. For more sophisticated plots, especially batch generated graphics, I recommend Graphics.Gnuplot.Advanced. This module contains also an overview of the hierarchy of objects.</b>
</p>

<p>
<a href="https://hackage.haskell.org/package/gnuplot">Graphics.Gnuplot</a>
</p>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="author">Author: Caio Rodrigues</p>
<p class="date">Created: 2017-03-03 sex 16:51</p>
<p class="creator"><a href="http://www.gnu.org/software/emacs/">Emacs</a> 25.1.1 (<a href="http://orgmode.org">Org</a> mode 8.2.10)</p>
<p class="validation"><a href="http://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>